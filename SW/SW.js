function cacheManager(info){let cn=`${info.name}-build${info.build.join(".")}`;let re=new RegExp(`${info.name}-build([0-9]+).([0-9]+).([0-9]+)`);let time=r=>{let t=r.map(v=>parseInt(v)),c=info.build;t.shift();var d=t[0]-c[0];if (!d) d=t[1]-c[1];if (!d) d=t[2]-c[2];return Math.sign(d);};let ael=(t,f)=>self.addEventListener(t,f);ael("install",e=>{e.waitUntil(caches.keys().then(l=>{var save=true;return Promise.all(l.map(n=>{let r=n.match(re);if (r) {let d=time(r);if (d==-1) return caches.delete(n);if (d==1) save=false;}})).then(()=>{if (save) return caches.open(`${info.name}-build${info.build.join(".")}`).then(c=>{return c.addAll(info.list);});});}));});ael("fetch",e=>{e.respondWith(caches.match(e.request).then(r=>{if (r) return r;let fr = e.request.clone();return fetch(fr).then(r=>{if (!r) return r;else if (r.status!=200) return r;let rc=r.clone();caches.open(cn).then(c=>{c.put(e.request,rc);});return r;});}));});};